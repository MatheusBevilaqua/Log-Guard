<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro-LogGuard</title>
  <!-- <link rel="stylesheet" href="css/pages/style.css"> -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css">
  <link rel="stylesheet" href="css/pages/cadastroLOGGUARD.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<style>

</style>

<body onload="verEmpresas()">

  <!-- <section id="page-cadastro-ind"> -->
  <!-- Cadastro de Empresa -->
  <!DOCTYPE html>
  <html lang="pt-br">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogGuard - Dashboard</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="css/partials/SideBar.css">
    <script src="js/sessao.js"></script>
    <link rel="shortcut icon" type="imagex/png" href="./img/logo_vetorizada6.png">
  </head>

  <body>
    <section class="page-dash">
      <nav id="sidebar">
        <div id="sidebar_content">

          <li class="side_itemLog active" style="cursor: none;">
            <a>
              <i><img src="img/logo_roxa.png" class="nav-dash-icon" style="height: 90px; width: 90px;"></i>
              <span class="item-description">
                <b style="color: #442BB3; padding-left: 15px;"> Log Guard </b>
              </span>
            </a>
          </li>


          <div id="user">
            <p id="user_infos">
              <span style="color: black;" class="item-descriptionAtivo"> Olá,
                <span style="color: #442BB3;" class="item-description" id="b_usuario">
                  Jon Doe
                </span>
              </span>
              <span class="item-description " id="cargo_usuario" style="color: #442BB3;">
                Lorem Ipsum
              </span>
            </p>
          </div>

          <ul id="side_items">


            <li class="side_item ">
              <a href="dashboard_ADM.html">
                <i> <img src="./img/olho.png" class="nav-dash-icon" style="width: 25px;"> </i>
                <span class="item-description">
                  <b> Visão Geral </b>
                </span>
              </a>
            </li>

            <li class="side_item">
              <a href="relatorios.html">
                <i> <img src="./img/icon-cnpj.png" class="nav-dash-icon"> </i>
                <span class="item-description">
                  <b> Relatórios </b>
                </span>
              </a>
            </li>

            <li class="side_item">
              <a href="gerenciar-maquina.html">
                <i> <img src="./img/monitor.svg" class="nav-dash-icon"> </i>
                <span class="item-description">
                  <b> Empresas </b>
                </span>
              </a>
            </li>

            <li class="side_item">
              <a href="gerenciar-usuario-func.html">
                <i> <img src="./img/icon-man.png" class="nav-dash-icon"> </i>
                <span class="item-description">
                  <b> Funcionários </b>
                </span>
              </a>
            </li>

            <li class="side_item active">
              <a href="dash_Gerenciamento_Operacao.html">
                <i> <img src="img/engrenagem_OperacaoBranco.png" class="nav-dash-icon"> </i>
                <span class="item-descriptionAtivo">
                  <b style="color: aliceblue;"> Operações </b>
                </span>
              </a>
            </li>

            <li class="side_item">
              <a href="feedback.html">
                <i> <img src="./img/e-mail.png" class="nav-dash-icon" style="width: 25px;"> </i>
                <span class="item-descriptionAtivo">
                  <b> feedback </b>
                </span>
              </a>
            </li>
          </ul>


          <button id="open_btn">
            <i> <img src="./img/seta-direita.png" class="nav-dash-icon"> </i>
          </button>
        </div>

        <div id="logout">
          <button id="logout_btn" onclick="sair()">
            <i> <img src="img/sair.png" class="nav-dash-icon"> </i>
            <span class="item-description">
              Sair
            </span>
          </button>
        </div>
      </nav>


      <div class="main-relatorios-page">

        <h1>Todas as empresas</h1>
        <div
          style="width: 1500px; padding: 10px; background-color: rgb(255, 255, 255); height: 750px; border-radius: 10px;">
          <div class="div-results" style="border: 1px, 0, #442BB3; height: 750px;">

            <div id="feed_container" style="overflow-x: hidden; height: 700px ;" class="feed-container"></div>
            <div class="login-form-btn" style="display:flex; padding-left: 150px;  padding-top: 60px; width:1800px; ">
              <button onclick="cadastrarEmpresaModal()" class="cad-func"
                style="display: flex;  padding: 10px; width: fit-content; height: fit-content;">Cadastrar
                Empresa</button>
            </div>
          </div>

        </div>

      </div>

      <!-- 
      <div class="pagina" style="padding-left: 20px; flex-direction: column; padding-top: 25px; padding-bottom: 5px;">
        <div style="width: 1750px; height: 700px; padding-left: 10px; color: black;">
          <h1 style="color: black;">Listar Empresas </h1>

          <div class="dash-func">
            <div class="titulos-empresa">
              <div class="coluna-func">
                <p> ID </p>
              </div>
              <div class="coluna-func">
                <p> Nome </p>
              </div>
              <div class="coluna-func">
                <p>E-Mail do Responsável</p>
              </div>
              <div class="coluna-func">
                <p> CNPJ </p>
              </div>
            </div>
            <div class="linha-func">
              <img src="./img/Line1cadastro.png" alt="">
            </div>
            <div class="dash-empresa">
              <div id="dash-func"></div>
            </div>
          </div> -->

      </div>
      </div>
      <!-- FIM TESTE ------------------------------------------------------------------------------------------------------ -->
      <form action="#" class="cadastrar-empresa" id="form1">


        <h2 class="bold black-text text-center">Cadastrar nova <b style="color: blueviolet;">
            Empresa </b></h2>
        </div>


        <!-- CADASTRO DE EMPRESA -------------------------------------------------------------------------------------------------------- -->
        <div style="flex-direction: row;">
          <button onclick="cancelar_edicao()" style="margin-left: 10px;" class="cancelar-relatorio">X</button>

          <div style="flex-direction: column;">
            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Nome da empresa" autocomplete="off"
                id="nomeEmpresa_Input" />
            </label>


            <label class="login-form-box" id="cnpjForm" for="cnpj">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="CNPJ" autocomplete="off"
                id="cnpj_Input" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="CEP" autocomplete="off"
                id="cep_Input" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Email do responsável"
                autocomplete="off" id="emailRes_Input" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Email institucional"
                autocomplete="off" id="emailInst_Input" />
            </label>
          </div>


          <div style="flex-direction: column; padding-top: 10px;">

            <h3 class="bold black-text">Definir <b style="color: blueviolet;">
                Parâmetros </b>
              <h5>(Utilizando pontos; exemplo: 80.00)</h5>
            </h3>


            <!-- CADASTRO DE EMPRESA -------------------------------------------------------------------------------------------------------- -->
            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text" placeholder="Uso de CPU (porcentagem limite)"
                autocomplete="off" id="paramCPU_Input" />
            </label>

            <!-- <label class="login-form-box">
                    <span class="icon">
                      <img src="./svg/icon-building.svg" alt="">
                    </span>
                    <input type="text" class="login-form-input black-text" placeholder="CNPJ" autocomplete="off"
                      id="cnpj_Input" />
                  </label> -->

            <label class="login-form-box" id="cnpjForm" for="cnpj">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text" placeholder="Uso de Memória (porcentagem limite)"
                autocomplete="off" id="paramMEM_Input" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text"
                placeholder="Uso de Disco (quantos GigaBytes devem restar para estar em alerta)" autocomplete="off"
                id="paramHD_Input" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text"
                placeholder="Uso de BandaLarga (MegaBytes por segundo)" autocomplete="off" id="paramBL_Input" />
            </label>

            <div class="login-form-btn" style="padding-top: 10px; width: 900px; margin-left: 720px;">
              <button onclick="cadastrarEmpresa()" class="cad-func" style="padding: 5px;">Cadastrar</button>
            </div>

          </div>
        </div>


        </div>
        </div>
        </div>
      </form>

      <form action="#" class="detalhar-empresa" id="form1">


        <h2 class="bold black-text text-center">Detalhes da <b style="color: blueviolet;">
            Empresa </b></h2>
        </div>


        <!-- Detalhes DE EMPRESA -------------------------------------------------------------------------------------------------------- -->
        <div style="flex-direction: row;">
          <button onclick="cancelar_edicao()" style="margin-left: 10px;" class="cancelar-relatorio">X</button>

          <div style="flex-direction: column;">
            <label class="login-form-span">

              <span type="text" class="login-form-input black-text">
                Nome Da empresa: <span id="nomeEmpresa_Span" class="metrica"> nome</span>
              </span>
            </label>


            <label class="login-form-span">

              <span type="text" class="login-form-input black-text">
                CNPJ: <span id="Cnpj_Span" class="metrica"> CNPJ</span>
              </span>
            </label>


            <label class="login-form-span">

              <span type="text" class="login-form-input black-text">
                CEP: <span id="Cep_Span" class="metrica">CEP</span>
              </span>
            </label>

            <label class="login-form-span">

              <span type="text" class="login-form-input black-text">
                Email responsável: <span id="emailResponsavel_Span" class="metrica">Email Resp</span>
              </span>
            </label>
            <label class="login-form-span">

              <span type="text" class="login-form-input black-text">
                Email Institucional: <span id="emailInstitucional_Span" class="metrica">Email Inst</span>
              </span>
            </label>
          </div>


          <div style="flex-direction: column; padding-top: 10px;">

            <h3 class="bold black-text"><b style="color: blueviolet;">
                Parâmetros </b>

            </h3>


            <!-- CADASTRO DE EMPRESA -------------------------------------------------------------------------------------------------------- -->

            <label class="login-form-span">
              <span type="text" class="login-form-input black-text">
                Uso de CPU (porcentagem limite): <span id="cpuLimite_Span" style="padding-left: 10px ;" class="metrica">
                  teste</span>%
              </span>
            </label>

            <label class="login-form-span">
              <span type="text" style="padding-right: 20px;" class="login-form-input black-text">
                Uso de memória (porcentagem limite): <span id="memLimite_Span" class="metrica"> teste</span>%
              </span>
            </label>

            <label class="login-form-span">
              <span type="text" style="padding-right: 20px;" class="login-form-input black-text">
                Uso de Disco (quantos GigaBytes devem restar para estar em alerta): <span id="diskLimite_Span"
                  class="metrica"> teste</span>%
              </span>
            </label>

            <label class="login-form-span">
              <span type="text" style="padding-right: 20px;" class="login-form-input black-text">
                Uso de BandaLarga (MegaBytes por segundo): <span id="blLimite_Span" class="metrica"> teste</span>MB
              </span>
            </label>

            <div
              style="display: flex;  flex-direction: row; height: fit-content;  padding-top: 10px; width: 900px; margin-left: 450px;">

              <button onclick="deletarEmpresa()" class="del-empresa" style="padding: 5px; margin-right: 10px;">Inativar
                Empresa</button>

              <button onclick="deletarEmpresa()" class="atv-empresa" style="padding: 5px; margin-right: 10px;">Ativar
                Empresa</button>

              <button onclick="editarEmpresa()" class="cad-func" style="padding: 5px;">Editar Empresa</button>


            </div>

          </div>
        </div>


        </div>
        </div>
        </div>
      </form>

      </div>
      </div>

      <div class="deletar-relatorio">
        <div class="Editar-func-primeiro-relatorio">
          <h1>Deseja mudar o Status dessa empresa?</h1>
          <div class="Editar-func-primeiro-relatorio">

            <div class="cadastrar-func-terceiro">
              <button style="background-color: #442BB3;" class="relatorio-btn"
                onclick="confirmar_deletar()">Confirmar</button>
              <button onclick="cancelar_delecao()" style="margin-left: 10px;" class="cancelar-relatorio">X</button>
            </div>
          </div>

        </div>
      </div>

      <form action="#" class="editar-empresa" id="form1">


        <h2 class="bold black-text text-center">Editar <b style="color: blueviolet;">
            Empresa </b></h2>
        </div>


        <!-- EDITAR DE EMPRESA -------------------------------------------------------------------------------------------------------- -->
        <div style="flex-direction: row;">
          <button onclick="cancelar_edicao()" style="margin-left: 10px;" class="cancelar-relatorio">X</button>

          <div style="flex-direction: column;">

            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Nome da empresa" autocomplete="off"
                id="nomeEmpresa_Input_Edit" />
            </label>


            <label class="login-form-box" id="cnpjForm" for="cnpj">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="CNPJ" autocomplete="off"
                id="cnpj_Input_Edit" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="CEP" autocomplete="off"
                id="cep_Input_Edit" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Email do responsável"
                autocomplete="off" id="emailRes_Input_Edit" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="text" class="login-form-input black-text" placeholder="Email institucional"
                autocomplete="off" id="emailInst_Input_Edit" />
            </label>
          </div>


          <div style="flex-direction: column; padding-top: 10px;">

            <h3 class="bold black-text">Editar <b style="color: blueviolet;">
                Parâmetros </b>
              <h5>(Utilizando pontos; exemplo: 80.00)</h5>
            </h3>

            <!-- EDITAR DE EMPRESA -------------------------------------------------------------------------------------------------------- -->

            </span>%
            </span>
            </label>
            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text" placeholder="Uso de CPU (porcentagem limite)"
                autocomplete="off" id="paramCPU_Input_Edit" />
            </label>


            <label class="login-form-box" id="cnpjForm" for="cnpj">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text" placeholder="Uso de Memória (porcentagem limite)"
                autocomplete="off" id="paramMEM_Input_Edit" />
            </label>



            </label>
            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/icon-building.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text"
                placeholder="Uso de Disco (quantos GigaBytes devem restar para estar em alerta)" autocomplete="off"
                id="paramHD_Input_Edit" />
            </label>


            <label class="login-form-box">
              <span class="icon">
                <img src="./svg/gmail-icon.svg" alt="">
              </span>
              <input type="number" class="login-form-input black-text"
                placeholder="Uso de BandaLarga (MegaBytes por segundo)" autocomplete="off" id="paramBL_Input_Edit" />
            </label>

            <div class="login-form-btn" style="padding-top: 10px; width: 900px; margin-left: 720px;">
              <button onclick="editar()" class="cad-func" style="padding: 5px;">Confirmar Edição</button>
            </div>

          </div>
        </div>


        </div>
        </div>
        </div>
      </form>

    </section>
  </body>

  </html>
  <script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
    var idEmpresaUsuario = sessionStorage.EMPRESA_USUARIO;
    var tipoPerfilUsuario = b_usuario.innerHTML = sessionStorage.TIPO_USUARIO;

    function editar() {
    var IdEmpresaVar = sessionStorage.getItem("ID_EMPRESA_EDITANDO");
    var nomeVar = nomeEmpresa_Input_Edit.value;
    var cnpjVar = cnpj_Input_Edit.value;
    var cepVar = cep_Input_Edit.value;
    var emailRespVar = emailRes_Input_Edit.value;
    var emailInstVar = emailInst_Input_Edit.value;
    var paramBL = paramBL_Input_Edit.value;
    var paramCPU = paramCPU_Input_Edit.value;
    var paramHD = paramHD_Input_Edit.value;
    var paramMEM = paramMEM_Input_Edit.value;

    console.log('Id da empresa', IdEmpresaVar)

    fetch(`/empresa/editar/${IdEmpresaVar}`, {
        method: "PUT",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            IdEmpresaServer: IdEmpresaVar,
            nomeServer: nomeVar,
            cnpjServer: cnpjVar,
            cepServer: cepVar,
            emailRespServer: emailRespVar,
            emailInstServer: emailInstVar,
            paramBLServer: paramBL,
            paramCPUServer: paramCPU,
            paramMEMServer: paramMEM,
            paramHDServer: paramHD,
        })
    }).then(function (resposta) {
        if (resposta.ok) {
            window.alert("Post atualizado com sucesso!");
            window.location = "relatorios.html";
        } else if (resposta.status == 404) {
            window.alert("Deu 404!");
        } else {
            throw ("Houve um erro ao tentar realizar a postagem! Código da resposta: " + resposta.status);
        }
    }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
    });
}


    window.onload = listar()

    function cadastrarEmpresaModal() {
      document.querySelector('.main-relatorios-page').style.filter = "blur(5px)";
      document.querySelector('.cadastrar-empresa').style.display = "block";

    }

    function editarEmpresa(idEmpresa) {
      document.querySelector('.main-relatorios-page').style.filter = "blur(5px)";
      document.querySelector('.editar-empresa').style.display = "block";

      var busca = idEmpresa - 1

      var IdEmpresaVar = sessionStorage.getItem("ID_EMPRESA_EDITANDO");





    }

    function cadastrarEmpresaModal() {
      document.querySelector('.main-relatorios-page').style.filter = "blur(5px)";
      document.querySelector('.cadastrar-empresa').style.display = "block";

    }

    function deletarEmpresa(idEmpresa) {

      document.querySelector('.main-relatorios-page').style.filter = "blur(5px)";
      document.querySelector('.deletar-relatorio').style.display = "block";
      document.querySelector('.detalhar-empresa').style.display = "none";
    }

    function cancelar_delecao() {
      document.querySelector('.main-relatorios-page').style.filter = "none";
      document.querySelector('.deletar-relatorio').style.display = "none";
      document.querySelector('.detalhar-empresa').style.display = "block";

    }

    function cancelar_edicao() {
      document.querySelector('.main-relatorios-page').style.filter = "none";
      document.querySelector('.cadastrar-empresa').style.display = "none";
      document.querySelector('.deletar-relatorio').style.display = "none";
      document.querySelector('.detalhar-empresa').style.display = "none";
      document.querySelector('.editar-empresa').style.display = "none";


    }

    const logincad_Btn = document.getElementById("login");
    const cadastrocad_Btn = document.getElementById("cadastro");
    const Form1 = document.getElementById("form1");
    const Form2 = document.getElementById("form2");
    const cad_container = document.querySelector(".cad_container");

    logincad_Btn.addEventListener("click", () => {
      cad_container.classList.remove("painel-direito-ativo");
    });

    cadastrocad_Btn.addEventListener("click", () => {
      cad_container.classList.add("painel-direito-ativo");
    });

    Form1.addEventListener("submit", (e) => e.preventDefault());
    Form2.addEventListener("submit", (e) => e.preventDefault());

    //Header
    const menuSlide = () => {
      const menuIcon = document.querySelector(".menu-icon");
      const navLinks = document.querySelector(".nav-links");
      const navLinksInner = document.querySelectorAll(".nav-links li");

      //menu-icon click event
      menuIcon.addEventListener("click", () => {
        //toggle active class
        navLinks.classList.toggle("menu-active");

        //animate navLinks
        navLinksInner.forEach((li, index) => {
          if (li.style.animation) {
            li.style.animation = "";
          } else {//toggle for menu-icon animation
            li.style.animation = `navLinkAnime 0.5s ease forwards ${index / 7 + 0.3
              }s`;
          }
        });

        //toggle for menu-icon animation
        menuIcon.classList.toggle("span-anime");
      });
    };

    menuSlide();

    function cadastrarEmpresa() {
      var nomeVar = nomeEmpresa_Input.value;
      var cnpjVar = cnpj_Input.value;
      var cepVar = cep_Input.value;
      var emailRespVar = emailRes_Input.value;
      var emailInstVar = emailInst_Input.value;
      var paramBL = paramBL_Input.value;
      var paramCPU = paramCPU_Input.value;
      var paramHD = paramHD_Input.value;
      var paramMEM = paramMEM_Input.value;



      if (
        nomeVar == "" ||
        cnpjVar == "" ||
        cepVar == "" ||
        emailRespVar == "" ||
        emailInstVar == "" ||
        paramBL == "" ||
        paramCPU == "" ||
        paramMEM == "" ||
        paramHD == ""
      ) {
        alert("Todos os campos devem ser preenchidos!");
        return false;
      } else {
        const dadosEmpresa = {
          nomeServer: nomeVar,
          cnpjServer: cnpjVar,
          cepServer: cepVar,
          emailRespServer: emailRespVar,
          emailInstServer: emailInstVar,
          paramBLServer: paramBL,
          paramCPUServer: paramCPU,
          paramMEMServer: paramMEM,
          paramHDServer: paramHD,
        };

        console.log("Dados da empresa a serem enviados:", dadosEmpresa);

        fetch("/empresas/cadastrar", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(dadosEmpresa)
        })
          .then(function (resposta) {
            console.log("Resposta recebida:", resposta);

            if (resposta.ok) {
              return resposta.json();
            }
            throw new Error("Houve um erro ao tentar realizar o cadastro!");
          })
          .then(function (data) {
            alert("CADASTRO EXECUTADO!");
            console.log("Dados retornados pelo servidor:", data);
            window.location.reload();
          })
          .catch(function (error) {
            console.error("Erro:", error);
          });

        return false;
      }
    }


    var listaEmpresa = ""


    var listaNome = ""
    var listaCep = ""
    var listaCnpj = ""
    var listaEmailResp = ""
    var listaEmailInst = ""
    var listaStatus = ""

    var listaParamCPU = ""
    var listaParamMEM = ""
    var listaParamDISK = ""
    var listaParamBL = ""


    function verEmpresas() {

      fetch("/empresas/visualizarEmpresas").then(function (resposta) {
        if (resposta.ok) {
          if (resposta.status == 204) {
            var lista = document.getElementById("dash-func");
            var mensagem = document.createElement("span");
            mensagem.innerHTML = "Nenhuma empresa encontrada."
            lista.appendChild(mensagem);
            throw "Nenhuma resultada encontrada!!";
          }

          resposta.json().then(function (resposta) {
            console.log("Dados recebidos: ", JSON.stringify(resposta));

            listaEmpresa = JSON.stringify(resposta);

            if (typeof listaEmpresa === 'string') {
              try {
                var letEmpresa = JSON.parse(listaEmpresa);
                listaEmpresa = letEmpresa;
                console.log(listaEmpresa);
              } catch (error) { console.error("Erro ao parsear JSON:", error); }
            } else {
              console.error("listaEmpresa não é uma string JSON:", listaEmpresa);
            }

            listaEmpresa = letEmpresa

            let letNome = listaEmpresa.map(item => item.nomeEmpresa)
            let letCep = listaEmpresa.map(item => item.cep)
            let letCnpj = listaEmpresa.map(item => item.cnpj)
            let letEmailResp = listaEmpresa.map(item => item.emailResponsavel)
            let letEmailInst = listaEmpresa.map(item => item.emailInstitucional)

            let letParamCPU = listaEmpresa.map(item => item.paramCPU);
            let letParamMEM = listaEmpresa.map(item => item.paramMEM);
            let letParamDISK = listaEmpresa.map(item => item.paramHD);
            let letParamBL = listaEmpresa.map(item => item.paramBL);

            console.log('Banda larga: ', letParamBL)
            console.log('CPU: ', letParamCPU)
            console.log('HD: ', letParamDISK)
            console.log('MEM: ', letParamMEM)

            let letStatus = listaEmpresa.map(item => item.statusEmpresa)

            listaNome = letNome
            listaCep = letCep
            listaCnpj = letCnpj
            listaEmailResp = letEmailResp
            listaEmailInst = letEmailInst

            listaParamCPU = letParamCPU
            listaParamMEM = letParamMEM
            listaParamDISK = letParamDISK
            listaParamBL = letParamBL

            listaStatus = letStatus

            var feed = document.getElementById("feed_container");
            feed.innerHTML = "";
            for (let i = 0; i < resposta.length; i++) {
              var empresa = resposta[i];

              var data = new Date(empresa.dtCadastroEmpresa);
              console.log(data);

              var ano = data.getFullYear();
              console.log(ano);

              var mes = String(data.getMonth() + 1).padStart(2, '0'); // Garantir dois dígitos
              console.log(mes);

              var dia = String(data.getDate()).padStart(2, '0'); // Garantir dois dígitos
              console.log(dia);

              var dataFormatada = dia + "/" + mes + "/" + ano;
              console.log("Data formatada:", dataFormatada);


              var divrelatorio = document.createElement("div");
              var spanID = document.createElement("span");
              var spanTitulo = document.createElement("span");
              var spanNome = document.createElement("span");
              var spanData = document.createElement("span")
              var spanSituacao = document.createElement("span")
              var spanCep = document.createElement("span")
              var spanCnpj = document.createElement("span")
              var divDescricao = document.createElement("div");
              var divButtons = document.createElement("div");
              var btnDetalhes = document.createElement("button");

              spanTitulo.innerHTML = "Email do responsável: <b>" + empresa.emailResponsavel + "</b>";
              spanNome.innerHTML = "Nome da empresa: <b>" + empresa.nomeEmpresa + "</b> ";
              spanData.innerHTML = "Data de Ingresso: <b>" + dataFormatada + "</b> <br><br>";
              spanSituacao.innerHTML = "Status: <b>" + empresa.statusEmpresa + "</b> <br><br>";
              btnDetalhes.innerHTML = "Visualizar empresa";
              spanCnpj.innerHTML = "Cnpj: <b>" + empresa.cnpj + "</b>";
              spanCep.innerHTML = "Cep: <b>" + empresa.cep + "</b>";

              divrelatorio.className = "empresa";
              spanTitulo.id = "inputNumero" + empresa.idEmpresa;
              spanSituacao.className = "relatorio-itens"
              spanNome.className = "relatorio-itens";
              spanData.className = "relatorio-itens"
              spanTitulo.className = "relatorio-itens";
              spanCep.className = "relatorio-itens"
              spanCnpj.className = "relatorio-itens";
              divDescricao.className = "relatorio-itens";

              divButtons.className = "div-buttons"

              btnDetalhes.className = "relatorio-btn-editar"
              btnDetalhes.id = "btnDetalhes" + empresa.idEmpresa;
              btnDetalhes.setAttribute("onclick", `detalhar_empresa(${empresa.idEmpresa})`);

              divrelatorio.appendChild(spanID);
              divrelatorio.appendChild(spanNome);
              divrelatorio.appendChild(spanData);

              divrelatorio.appendChild(spanTitulo);
              divrelatorio.appendChild(divDescricao);
              divrelatorio.appendChild(spanCep);
              divrelatorio.appendChild(spanCnpj);

              divrelatorio.appendChild(spanSituacao);
              divrelatorio.appendChild(divButtons);
              divButtons.appendChild(btnDetalhes);
              feed.appendChild(divrelatorio);

            }
          });
        } else {
          throw ('Houve um erro na API!');
        }
      }).catch(function (resposta) {
        console.error(resposta);
      });
    }


    function detalhar_empresa(idEmpresa) {
      console.log("cliquei em detalhar - ID: " + idEmpresa);
      busca = idEmpresa - 1
      document.querySelector('.main-relatorios-page').style.filter = "blur(5px)";
      document.querySelector('.detalhar-empresa').style.display = "block";

      if (listaStatus[busca] == 'ATIVO') {
        document.querySelector('.del-empresa').style.display = "block";
        document.querySelector('.atv-empresa').style.display = "none";
      } else {
        document.querySelector('.del-empresa').style.display = "none";
        document.querySelector('.atv-empresa').style.display = "block";
      }

      sessionStorage.ID_POSTAGEM_EDITANDO = idEmpresa;


      nomeEmpresa_Span.innerHTML = listaNome[busca]
      Cep_Span.innerHTML = listaCep[busca]
      Cnpj_Span.innerHTML = listaCnpj[busca]
      emailResponsavel_Span.innerHTML = listaEmailResp[busca]
      emailInstitucional_Span.innerHTML = listaEmailInst[busca]

      cpuLimite_Span.innerHTML = listaParamCPU[busca]
      diskLimite_Span.innerHTML = listaParamDISK[busca]
      memLimite_Span.innerHTML = listaParamMEM[busca]
      blLimite_Span.innerHTML = listaParamBL[busca]

      // Definindo valores pré-prontos nos inputs usando JavaScript
      document.getElementById('nomeEmpresa_Input_Edit').value = `${listaNome[busca]}`;
      document.getElementById('cnpj_Input_Edit').value = `${listaCnpj[busca]}`;
      document.getElementById('cep_Input_Edit').value = `${listaCep[busca]}`;
      document.getElementById('emailRes_Input_Edit').value = `${listaEmailResp[busca]}`;
      document.getElementById('emailInst_Input_Edit').value = `${listaEmailInst[busca]}`;
      document.getElementById('paramBL_Input_Edit').value = `${listaParamBL[busca]}`;
      document.getElementById('paramCPU_Input_Edit').value = `${listaParamCPU[busca]}`;
      document.getElementById('paramHD_Input_Edit').value = `${listaParamDISK[busca]}`;
      document.getElementById('paramMEM_Input_Edit').value = `${listaParamMEM[busca]}`;

      console.log('Valor da input', teste)

      document.getElementById('nomeEmpresa_Input_Edit').placeholder = `${listaNome[busca]}`;
      document.getElementById('cnpj_Input_Edit').placeholder = `${listaCnpj[busca]}`;
      document.getElementById('cep_Input_Edit').placeholder = `${listaCep[busca]}`;
      document.getElementById('emailRes_Input_Edit').placeholder = `${listaEmailResp[busca]}`;
      document.getElementById('emailInst_Input_Edit').placeholder = `${listaEmailInst[busca]}`;
      document.getElementById('paramBL_Input_Edit').placeholder = `${listaParamBL[busca]}`;
      document.getElementById('paramCPU_Input_Edit').placeholder = `${listaParamCPU[busca]}`;
      document.getElementById('paramHD_Input_Edit').placeholder = `${listaParamDISK[busca]}`;
      document.getElementById('paramMEM_Input_Edit').placeholder = `${listaParamMEM[busca]}`;




    }

  </script>

  <script>


    var teste = 0

    document.getElementById('open_btn').addEventListener('click', function () {

      document.getElementById('sidebar').classList.toggle('open-sidebar');
      this.classList.toggle('rodar');

      if (teste == 0) {
        document.getElementById('nomeLog').style.display = "block";
        teste = 1
      } else {
        document.getElementById('nomeLog').style.display = "none";
        teste = 0
      }

    });

    function sair() {
      window.location.href = "index.html";
    }

    document.getElementById('olho').addEventListener('mousedown', function () {
      document.getElementById('input_senhaUsuario').type = 'text';
    });

    document.getElementById('olho').addEventListener('mouseup', function () {
      document.getElementById('input_senhaUsuario').type = 'password';
    });

    // Para que o password não fique exposto apos mover a imagem.
    document.getElementById('olho').addEventListener('mousemove', function () {
      document.getElementById('input_senhaUsuario').type = 'password';
    });



    document.getElementById('olho2').addEventListener('mousedown', function () {
      document.getElementById('input_confirmarSenha').type = 'text';
    });

    document.getElementById('olho2').addEventListener('mouseup', function () {
      document.getElementById('input_confirmarSenha').type = 'password';
    });

    // Para que o password não fique exposto apos mover a imagem.
    document.getElementById('olho2').addEventListener('mousemove', function () {
      document.getElementById('input_confirmarSenha').type = 'password';
    });
  </script>

  <script>
    document.getElementById('cnpj_Input').addEventListener('input', function (e) {
      var value = e.target.value;
      var rawValue = value.replace(/\D/g, ''); // Remove tudo que não é número

      // Verifica se o CNPJ tem 15 dígitos e se o primeiro dígito é '0'
      if (rawValue.length === 15 && rawValue.startsWith('0')) {
        // Verifica se, ao remover o '0', o restante é um CNPJ válido
        var potentialCNPJ = rawValue.substring(1);
        // Atualiza rawValue para o CNPJ sem o '0' inicial
        if (validaCNPJ(potentialCNPJ)) rawValue = potentialCNPJ;
      }

      var cnpjPattern = rawValue
        .replace(/^(\d{2})(\d)/, '$1.$2') // Adiciona ponto após o segundo dígito
        .replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3') // Adiciona ponto após o quinto dígito
        .replace(/\.(\d{3})(\d)/, '.$1/$2') // Adiciona barra após o oitavo dígito
        .replace(/(\d{4})(\d)/, '$1-$2') // Adiciona traço após o décimo segundo dígito
        .replace(/(-\d{2})\d+?$/, '$1'); // Impede a entrada de mais de 14 dígitos
      e.target.value = cnpjPattern;
    });

    document.getElementById('cnpj_Input_Edit').addEventListener('input', function (e) {
      var value = e.target.value;
      var rawValue = value.replace(/\D/g, ''); // Remove tudo que não é número

      // Verifica se o CNPJ tem 15 dígitos e se o primeiro dígito é '0'
      if (rawValue.length === 15 && rawValue.startsWith('0')) {
        // Verifica se, ao remover o '0', o restante é um CNPJ válido
        var potentialCNPJ = rawValue.substring(1);
        // Atualiza rawValue para o CNPJ sem o '0' inicial
        if (validaCNPJ(potentialCNPJ)) rawValue = potentialCNPJ;
      }

      var cnpjPattern = rawValue
        .replace(/^(\d{2})(\d)/, '$1.$2') // Adiciona ponto após o segundo dígito
        .replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3') // Adiciona ponto após o quinto dígito
        .replace(/\.(\d{3})(\d)/, '.$1/$2') // Adiciona barra após o oitavo dígito
        .replace(/(\d{4})(\d)/, '$1-$2') // Adiciona traço após o décimo segundo dígito
        .replace(/(-\d{2})\d+?$/, '$1'); // Impede a entrada de mais de 14 dígitos
      e.target.value = cnpjPattern;
    });
  </script>
  <script>
    document.getElementById("cep_Input").addEventListener("input", function (e) {
      let cep = e.target.value.replace(/\D/g, ""); // Remove caracteres não numéricos

      // Limita o número de dígitos a 8
      if (cep.length > 8) {
        cep = cep.slice(0, 8);
      }

      // Adiciona o traço depois dos cinco primeiros dígitos
      if (cep.length > 5) {
        cep = cep.slice(0, 5) + "-" + cep.slice(5);
      }

      // Atualiza o valor do campo com a máscara aplicada
      e.target.value = cep;
    });

    document.getElementById("cep_Input_Edit").addEventListener("input", function (e) {
      let cep = e.target.value.replace(/\D/g, ""); // Remove caracteres não numéricos

      // Limita o número de dígitos a 8
      if (cep.length > 8) {
        cep = cep.slice(0, 8);
      }

      // Adiciona o traço depois dos cinco primeiros dígitos
      if (cep.length > 5) {
        cep = cep.slice(0, 5) + "-" + cep.slice(5);
      }

      // Atualiza o valor do campo com a máscara aplicada
      e.target.value = cep;
    });
  </script>